# 🔐 LibreTV 密码更新说明

## 🎯 问题解决

现在已经解决了密码设置不生效的问题！系统提供了多种密码更新方式：

## 🚀 方式一：管理员设置页面（推荐）

1. **打开主页** - 访问你的 LibreTV 首页
2. **点击设置按钮** - 右上角的齿轮图标
3. **选择"密码管理"** - 在管理员设置区域
4. **验证当前密码** - 输入当前密码（默认：`admin123`）
5. **设置新密码** - 输入并确认新密码
6. **立即生效** - 点击"立即更新密码"，系统会实时更新

### ✨ 特点
- ✅ **实时更新** - 无需刷新页面
- ✅ **自动同步** - 所有组件自动更新
- ✅ **即时验证** - 立即可以使用新密码

## 🛠️ 方式二：密码工具页面

1. **访问** `password-setup.html`
2. **输入当前密码** - 验证身份
3. **设置新密码** - 支持明文或哈希值
4. **立即更新** - 实时更新配置

## 🔧 方式三：命令行同步

```bash
# 使用新密码作为参数
node password-sync.js "你的新密码"

# 从主配置文件读取
node password-sync.js
```

## 📋 更新过程

### 系统会自动更新以下组件：

1. **主配置文件** - `config/master-config.js`
2. **前端认证** - `js/auth-config.js`
3. **配置加载器** - `config/config-loader.mjs`
4. **代理服务** - `functions/proxy/[[path]].js`
5. **内存配置** - 浏览器中的实时配置

### 更新后的效果：

- ✅ 新密码立即生效
- ✅ 旧的认证会话自动清除
- ✅ 所有API调用使用新密码
- ✅ 支持明文密码和哈希值登录

## 🎉 使用流程

### 首次使用
1. 使用默认密码 `admin123` 登录
2. 进入管理员设置页面
3. 设置你的个人密码
4. 立即生效，无需重启

### 日常使用
- 可以随时通过管理员设置修改密码
- 支持明文密码和哈希值登录
- 新浏览器会要求输入最新密码

## 🔍 故障排除

### 如果密码更新后仍然不生效：

1. **清除浏览器缓存** - 强制刷新页面（Ctrl+F5）
2. **检查控制台** - 查看是否有错误信息
3. **使用诊断工具** - 访问 `quick-fix.html` 进行诊断
4. **重新设置** - 通过管理员设置页面重新设置密码

### 常见问题：

**Q: 设置新密码后还是要求旧密码？**  
A: 清除浏览器的 localStorage 数据，或者使用隐私模式重新访问。

**Q: 密码设置成功但API还是报错？**  
A: 检查是否是云端部署，需要同时设置环境变量 `PASSWORD`。

**Q: 忘记设置的新密码？**  
A: 查看 `config/master-config.js` 文件第8行的密码配置。

## 🌟 新功能特点

- 🎯 **一键更新** - 管理员设置页面实时更新
- 🔄 **自动同步** - 所有相关文件自动更新
- 💡 **智能检测** - 自动识别明文密码和哈希值
- 🛡️ **安全验证** - 必须验证当前密码才能修改
- 📱 **响应式设计** - 支持各种设备访问

---

**🎊 现在你可以轻松地设置和管理你的专属密码了！**